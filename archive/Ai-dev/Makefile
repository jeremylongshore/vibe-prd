DOCS=docs
SOP=sop
TPL=templates
T?=create-prd.md
N?=new-doc.md

.PHONY: status create help

status:
	@echo "ğŸ“Š AI-Dev Pipeline Status: Jeremy's Workspace"
	@echo "=============================================="
	@echo "ğŸ“š Templates: $(shell [ -d $(TPL) ] && echo "âœ… Available" || echo "âŒ Missing")"
	@echo "ğŸ“ Documents: $(shell [ -d $(DOCS) ] && ls -1 $(DOCS) 2>/dev/null | wc -l || echo "0") files"
	@echo ""
	@echo "ğŸ“‹ Current Documents:"
	@[ -d $(DOCS) ] && ls -1 $(DOCS) 2>/dev/null | sed 's/^/  âœ“ /' || echo "  (no documents yet)"

create:
	@mkdir -p $(DOCS) $(SOP)
	@if [ ! -f "$(TPL)/$(T)" ]; then echo "âŒ Template not found: $(T)"; echo "ğŸ’¡ Available templates in ~/ai-dev/templates/"; exit 1; fi
	@if echo "$(N)" | grep -q "sop"; then \
		cp "$(TPL)/$(T)" "$(SOP)/$(N)"; \
		echo "ğŸ“„ Created: $(SOP)/$(N)"; \
	else \
		cp "$(TPL)/$(T)" "$(DOCS)/$(N)"; \
		echo "ğŸ“„ Created: $(DOCS)/$(N)"; \
	fi
	@echo "âœï¸  Next: Edit the document and update README.md checklist"

help:
	@echo "ğŸš€ AI-Dev Commands"
	@echo "=================="
	@echo "make status           - Show pipeline status"
	@echo "make create T=X N=Y   - Create document Y from template X"
	@echo ""
	@echo "ğŸ“š Common Templates:"
	@echo "  create-prd.md       - Product Requirements Document"
	@echo "  adr-template.md     - Architecture Decision Record"
	@echo "  create-tech-spec.md - Technical Specification"
	@echo "  generate-tasks.md   - Implementation Tasks"