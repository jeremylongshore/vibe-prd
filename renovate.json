{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "prHourlyLimit": 2,
  "timezone": "America/Chicago",
  "labels": ["deps", "bmad"],
  "rebaseWhen": "behind-base-branch",
  "commitMessagePrefix": "bump: ",
  "regexManagers": [
    {
      "fileMatch": ["^\\.bmad-version$"],
      "matchStrings": [
        "^(?<depName>ghcr\\.io\\/[^\\s:]+\\/[^\\s:]+):(?<currentValue>\\S+)\\s*$"
      ],
      "datasourceTemplate": "docker"
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["regex"],
      "matchPackageNames": ["ghcr.io/bmad-org/bmad"],
      "automerge": false,
      "prBodyNotes": [
        "This PR updates `.bmad-version` and runs `make bmad-lock` to refresh the digest."
      ],
      "postUpgradeTasks": {
        "commands": ["make bmad-lock"],
        "fileFilters": [".bmad-lock"],
        "executionMode": "update"
      }
    }
  ]
}